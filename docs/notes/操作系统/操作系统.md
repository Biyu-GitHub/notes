# 进程与线程

## 进程

进程是资源分配的基本单位。

进程控制块 (Process Control Block, PCB) 描述进程的基本信息和运行状态，所谓的创建进程和撤销进程，都是指对 PCB 的操作。

## 线程

线程是独立调度的基本单位，共享进程的资源

## 区别

| 区别     | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| 拥有资源 | 进程是资源分配的基本单位，线程不拥有资源，多个线程共享进程的资源。 |
| 调度     | 线程是独立调度的基本单位。在同一进程中，线程的切换不会引起进程切换；从一个进程中的线程切换到另一个进程中的线程时，会引起进程切换。 |
| 系统开销 | 线程切换时只需保存和设置少量寄存器内容，开销很小。           |
| 通信     | 线程间可以通过直接读写同一进程中的数据进行通信，但是进程通信需要借助 IPC。 |

## 进程状态切换

* created
* ready
* running
* waiting
* terminated

## 进程调度算法

| 批处理系统       | 交互式系统   |
| ---------------- | ------------ |
| 先来先服务 FCFS  | 时间片轮转   |
| 短作业优先 SJF   | 优先级调度   |
| 剩余最短时间优先 | 多级反馈队列 |

# 死锁

## 哲学家就餐问题

- 必须同时拿起两根筷子
- 两个邻居都没就餐的时候才可以就餐

## 必要条件

* 互斥
* 不可抢占
* 占有和等待
* 环路等待

## 处理方法

- 鸵鸟策略
- 死锁检测与死锁恢复
- 死锁预防
- 死锁避免

### 鸵鸟策略

大多数操作系统，包括 Unix，Linux 和 Windows，处理死锁问题的办法仅仅是忽略它。

### 死锁检测与死锁恢复

环路检测

利用抢占，回滚，或者杀死进程来恢复死锁

### 死锁预防

破坏4个必要条件中的1个即可

### 死锁避免-银行家算法

拒绝进入不安全的状态。

# 内存管理

将物理内存映射未逻辑内存，即地址空间。

每个程序都拥有自己的地址空间，将地址空间划分成多块，每一块成为一页。

## 分页系统

虚拟地址 = 页号 + 偏移量

## 页面置换算法

| 名称               | 说明                                                         |
| ------------------ | ------------------------------------------------------------ |
| 最佳               | 置换掉将来最长时间不会被使用的页面。理论算法，因为无法预测将来 |
| 最近最久未使用 LRU |                                                              |
| 最近未使用         | 使用R，M标记，优先置换点R=0 M=1的页面                        |
| 先进先出           |                                                              |
| 第二次机会算法     |                                                              |
| 时钟算法           |                                                              |

## 分段

## 段页式

# 磁盘调度算法

| 名称             | 说明                                                         |
| ---------------- | ------------------------------------------------------------ |
| 先来先服务       | 按照磁盘请求的顺序进行调度。                                 |
| 最短寻道时间优先 | 优先调度与当前磁头所在磁道距离最近的磁道。                   |
| 电梯调度算法     | 电梯总是保持一个方向运行，直到该方向没有请求为止，然后改变运行方向。 |

